---
layout: post
title: Item 17. 변경 가능성을 최소화하라
date: 2022-06-15 23:15 +0900
categories: [Book, Effective Java]
tags: [Java, Effective Java, Getter]
---



Effective Java의 열일곱 번째 아이템 "변경 가능성을 최소화하라"를 읽고 정리한 내용을 포스팅합니다.

<br>

## 0. 들어가며



<br>

## 1. 불변 클래스

불변 클래스란 인스턴스의 내부 값을 수정할 수 없는 클래스를 말한다.

- 규칙
  - 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
  - 클래스를 확장할 수 없도록 한다.
  - 모든 필드를 final로 선언한다.
  - 모든 필드를 private으로 선언한다.
  - 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.

<br>

## 2. 예제

```java
```



<br>

## 3. 장단점

- 불변 객체는 단순하다.
- 불변 객체는 근본적으로 스레드 안전하여 따로 동기화할 필요 없다.
- 불변 객체는 자유롭게 공유할 수 있음은 물론, 불변 객체끼리는 내부 데이터를 공유할 수 있다.
- 객체를 만들 때 다른 불변 객체들을 구성요소로 사용하면 이점이 많다.
- 불변 객체는 그 자체로 실패 원자성을 제공한다.



- 값이 다르면 반드시 독립된 객체로 만들어야 한다.
  - 흔히 쓰일 다단계 연산들을 예측하여 기본 기능으로 제공하는 방법
  - 가변 동반 클래스??

<br>

## 4. 불변 클래스 설계 방법

- 자신을 상속하지 못하게 해야 함
  - final 클래스로 선언
  - 모든 생성자를 private 혹은 packge-private으로 만들고 public 정적 팩터리를 제공

```java

```

- 어떤 메서드도 객체의 상태 중 외부에 비치는 값을 변경할 수 없다.
  - 캐시

<br>

## 5. 핵심 정리

- 클래스는 꼭 필요한 경우가 아니라면 불변이어야 한다.
- 단순한 값 객체는 항상 불변으로 만들자.
- 무거운 값 객체도 불변으로 만들 수 있는지 고심해야 한다. 성능 때문에 어쩔 수 없다면 불변 클래스와 쌍을 이루는 가변 동반 클래스를 public 클래스로 제공하도록 하자.
- 불변으로 만들 수 없는 클래스라도 변경할 수 있는 부분을 최소한으로 줄이자.
- 다른 합당한 이유가 없다면 모든 필드는 private final이어야 한다.
- 생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 한다.

<br>

## 6. Related Posts

