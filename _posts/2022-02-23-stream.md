---
layout: post
title: Stream API (1)
date: 2022-02-23 22:55 +0900
categories: [Language, Java]
tags: [Java 8, Stream API]
---



## Stream API란?

Stream API는 Java 8에서 추가되었으며, 데이터를 추상화하고 처리하는데 자주 사용되는 함수들을 정의해둔 API이다. 

여기서 데이터를 추상화하였다는 것은 데이터의 종류와 관계없이 같은 방식으로 데이터를 처리할 수 있다는 것을 의미한다. 

<br>

Java 8 이전에는 배열 또는 컬렉션 인스턴스를 다루기 위해 for 또는 forEach 문을 돌려 요소를 하나씩 꺼내 연산을 수행했다. 간단한 경우라면 문제가 되지 않지만, 로직이 복잡해질수록 코드의 양도 많아지고 여러 로직이 섞여 가독성도 떨어진다.

Stream API는 반복 문법을 메소드 내부에 숨긴 내부 반복을 사용해 이를 보완한다. 또한 배열 또는 컬렉션 인스턴스에 여러 개의 함수를 조합해 필터링하고 가공된 결과를 얻을 수 있다. 즉, 배열과 컬렉션을 함수형으로 처리할 수 있게 되는 것이다. 

<br>

정리하면 다음과 같은 **장점**을 가지고 있다.

- 유연하다.
  - 데이터를 추상화하고 함수를 조합하는 방식으로 데이터를 처리하기 때문에 변하는 요구사항에 쉽게 대응할 수 있다.
- 가독성이 높다.
  - 람다식 또는 메서드 참조를 이용해 간결하고 명확하게 표현할 수 있다.
- 병렬 처리가 쉽다.
  - 멀티 스레드 코드를 직접 구현하지 않고 내부 반복을 통해 간단하게 처리할 수 있다.

<br>

## 특징

### 1. 데이터 원본을 유지한다.

Stream API는 원본의 데이터를 조회하여 원본의 데이터가 아닌 별도의 요소들로 Stream을 생성한다. 그렇기 때문에 원본의 데이터로부터 읽기만 할 뿐이며, 정렬이나 필터링 등의 작업은 별도의 Stream 요소들에서 처리가 된다.

```java
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);

List<Integer> sortedList = list.stream().sorted(Comparator.reverseOrder()).collect(Collectors.toList());

System.out.println(sortedList);
System.out.println(list);

/* 실행 결과
[5, 4, 3, 2, 1]
[1, 2, 3, 4, 5]
*/
```

Stream을 통해 원본 데이터[1, 2, 3, 4, 5]를 정렬하고 sortedList에 저장했다.

실행 결과를 보면 정렬이 잘 수행 되었고, 원본 데이터는 변경되지 않는 것을 확인할 수 있다.

<br>

### 2. 일회용이다.

Stream API는 일회용이기 때문에 한번 사용이 끝나면 재사용이 불가능하다. 

```java
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);

Stream<Integer> integerStream = list.stream();

int result = integerStream.reduce(0, Integer::max);

System.out.println(result);
System.out.println(integerStream.reduce(0, Integer::max));

/* 실행 결과
5
Exception in thread "main" java.lang.IllegalStateException: stream has already been operated upon or closed
...
*/
```

list의 Stream인 integerStream를 통해 list의 최댓값을 추출했다. 그리고 다시 integerStream를 사용해 같은 연산을 수행했다.

실행 결과로 list의 최댓값 5가 출력된 후 IllegalStateException이 발생했다. integerStream이 이미 사용되고 닫힌 후 재사용하려고 했기 때문이다. 같은 Stream이 필요하다면 다시 생성해주어야 한다.

<br>

### 3. 내부 반복자를 통해 작업을 처리한다.

```java
```



<br>

## 사용

### 1. 생성



<br>

### 2. 가공



<br>

### 3. 결과



<br>

dd

<br>

## Refference

- [https://mangkyu.tistory.com/112](https://mangkyu.tistory.com/112)
- [https://futurecreator.github.io/2018/08/26/java-8-streams/](https://futurecreator.github.io/2018/08/26/java-8-streams/)
- [https://hbase.tistory.com/171](https://hbase.tistory.com/171)
- [https://12bme.tistory.com/461](https://12bme.tistory.com/461)
