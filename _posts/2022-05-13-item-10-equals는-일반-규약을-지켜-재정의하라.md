---
layout: post
title: item 10. equals는 일반 규약을 지켜 재정의하라 (미완성)
date: 2022-05-13 23:43 +0900
categories: [Book, Effective Java]
tags: [Java, Effective Java, Override]
---



Effective Java의 열 번째 아이템 "equals는 일반 규약을 지켜 재정의하라"를 읽고 정리한 내용을 포스팅합니다.

<br>

## 0. 들어가며

equals 메서드는 재정의하기 쉬워 보이지만 곳곳에 함정이 도사리고 있어서 자칫하면 끔찍한 결과를 초래합니다. 본문에서 equals 메서드의 재정의가 어떠한 상황에서 필요한지 그리고 올바른 구현 방법과 주의사항을 알아보겠습니다.

<br>

## 1. 재정의가 불필요한 경우

- 각 인스턴스가 본질적으로 고유하다.
- 인스턴스의 '논리적 동치성(logical equality)'을 검사할 일이 없다.
- 상위 클래스에서 재정의한 equals가 하위 클래스에도 딱 들어맞는다.
- 클래스가 private이거나 package-private이고 equals 메서드를 호출할 일이 없다.

<br>

## 2. 재정의가 필요한 경우

두 객체가 물리적으로 같은지가 아니라 논리적 동치성을 확인해야 하는데, 상위 클래스의 equals가 논리적 동치성을 비교하도록 재정의되지 않았을 때다.

<br>

## 3. 규약

- 반사성
- 대칭성
- 추이성
- 일관성
- not-null

<br>

## 4. 올바른 구현 방법

- == 연산자를 사용해 입력이 자기 자신의 참조인지 확인한다.
- instanceof 연산자로 입력이 올바른 타입인지 확인한다.
- 입력을 올바른 타입으로 형변환한다.
- 입력 객체와 자기 자신의 대응되는 '핵심' 필드들이 모두 일치하는지 하나씩 검사한다.

<br>

## 5. 주의사항

- equals를 재정의할 땐 hashCode도 반드시 재정의하자.
- 너무 복잡하게 해결하려 들지 말자.
- Object 외의 타입을 매개변수로 받는 equals 메서드는 선언하지 말자.

<br>

## 6. 테스트

- 직접 작성
- AutoValue
- IDE

<br>

## 7. 핵심 정리

꼭 필요한 경우가 아니면 equals를 재정의하지 말자. 많은 경우에 Object의 equals가 여러분이 원하는 비교를 정확히 수행해준다. 재정의해야 할 때는 그 클래스의 핵심 필드 모두를 빠짐없이, 다섯 가지 규약을 확실히 지켜가며 비교해야 한다.

<br>

## 8. Related Posts

- 인스턴스 통제 클래스 (Item 1)
