<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="2장. 테스트" /><meta property="og:locale" content="en" /><meta name="description" content="2.1 UserDaoTest 다시 보기" /><meta property="og:description" content="2.1 UserDaoTest 다시 보기" /><link rel="canonical" href="https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/" /><meta property="og:url" content="https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/" /><meta property="og:site_name" content="H’s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-26T18:21:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="2장. 테스트" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-26T18:21:00+09:00","datePublished":"2022-06-26T18:21:00+09:00","description":"2.1 UserDaoTest 다시 보기","headline":"2장. 테스트","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/"},"url":"https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/"}</script><title>2장. 테스트 | H's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="H's Tech Blog"><meta name="application-name" content="H's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/me.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">H's Tech Blog</a></div><div class="site-subtitle font-italic">주니어 서버 개발자의 성장기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/heung27" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wlsgmd1535','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>2장. 테스트</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>2장. 테스트</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/heung27">Jin Heung An</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1656235260" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-26 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4755 words"> <em>26 min</em> read</span></div></div></div><div class="post-content"><h2 id="21-userdaotest-다시-보기">2.1 UserDaoTest 다시 보기 <a href="#21-userdaotest-다시-보기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="211-테스트의-유용성">2.1.1 테스트의 유용성 <a href="#211-테스트의-유용성" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>코드의 구조와 설계, 적용한 기술이 변경되더라도 그 기능은 처음 만들었던 때와 다를 바 없이 기능을 잘 수행한다는 것을 보장하는 방법은 테스트를 통해 직접 기능을 동작시켜서 결과를 확인하는 방법 외에는 없다.</p><p><br /></p><p>테스트란 결국 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서, 만든 코드를 확신할 수 있게 해주는 작업이다.</p><p>테스트의 결과가 원하는 대로 나오지 않는 경우에는 코드나 설계에 결함이 있음을 알 수 있다. 이를 통해 디버깅을 거치게 되고, 결국 최종적으로 테스트가 성공하면 모든 결함이 제거됐다는 확신을 얻을 수 있다.</p><p><br /></p><h3 id="212-userdaotest의-특징">2.1.2 UserDaoTest의 특징 <a href="#212-userdaotest의-특징" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
    <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericXmlApplicationContext</span><span class="o">(</span><span class="s">"applicationContext.xml"</span><span class="o">);</span>
    
    <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"user"</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"백기선"</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"married"</span><span class="o">);</span>
    
    <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 등록 성공"</span><span class="o">);</span>
    
    <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span>
    
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 조회 성공"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>main() 메서드를 이용해 쉽게 테스트 수행을 가능하게 했다.<li>테스트할 대상인 UserDao를 직접 호출해서 사용한다.</ul><p><br /></p><h4 id="웹을-통한-dao-테스트-방법의-문제점">웹을 통한 DAO 테스트 방법의 문제점 <a href="#웹을-통한-dao-테스트-방법의-문제점" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>보통 웹 프로그램에서 사용하는 DAO를 테스트하는 방법은 다음과 같다.</p><ul><li>DAO를 만든 뒤 바로 테스트하지 않고, 서비스 계층, MVC 프레젠테이션 계층까지 포함한 모든 입출력 기능을 대충이라도 코드로 다 만든다.<li>이렇게 만들어진 테스트용 웹 애플리케이션을 서버에 배치한 뒤, 웹 화면을 띄워 테스트를 진행한다.</ul><p><br /></p><p>이러한 방법은 가장 흔히 쓰는 방법이지만, DAO에 대한 테스트로서는 단점이 너무 많다.</p><ul><li>DAO뿐만 아니라 서비스 클래스, 컨트롤러, JSP 뷰 등 모든 레이어의 기능을 다 만들고 나서야 테스트가 가능하다.<li>테스트를 하는 중에 에러가 나거나 테스트에 실패했다면, 어디에서 문제가 발생했는지 찾아내야 하는 수고가 필요하다.<ul><li>다른 계층의 코드와 컴포넌트, 서버의 설정 상태까지 모두 테스트에 영향을 줄 수 있다.</ul></ul><p><br /></p><p>이런 방식으로 테스트하는 것은 번거롭고, 오류가 있을 때 빠르고 정확하게 대응하기 힘들다. 그렇다면 테스트를 어떻게 만들면 이런 문제를 피할 수 있고, 효율적으로 테스트를 활용할 수 있을까?</p><p><br /></p><h4 id="작은-단위의-테스트">작은 단위의 테스트 <a href="#작은-단위의-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>테스트하고자 하는 대상이 명확하다면 가능한 작은 단위로 쪼개 그 대상에만 집중해서 테스트하는 것이 바람직하다. UserDaoTest는 한 가지 관심에 집중할 수 있게 작은 단위로 만들어진 테스트다.</p><ul><li>웹 인터페이스나, 그것을 위한 MVC 클래스, 서비스 오브젝트 등이 필요 없다. 서버에 배포할 필요도 없이 간단하게 테스트 수행이 가능하다.<li>때문에 에러가 나거나 원치 않는 결과가 나와도 빠르게 원인을 찾을 수 있다.</ul><p><br /></p><p>이렇게 작은 단위의 코드에 대해 테스트를 수행한 것을 <strong>단위 테스트(unit test)</strong>라고 한다.</p><ul><li>단위(unit)란 충분히 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위의 단위라고 보면 된다.<li>단위를 넘어서는 다른 코드들은 신경 쓰지 않고 참여하지도 않고 테스트가 동작할 수 있으면, 단위는 작을수록 좋다.</ul><p><br /></p><h4 id="자동수행-테스트-코드">자동수행 테스트 코드 <a href="#자동수행-테스트-코드" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>UserDaoTest의 한 가지 특징은 테스트할 데이터가 코드를 통해 제공되고, 테스트 작업 역시 코드를 통해 자동으로 실행한다는 점이다. main() 메서드를 실행하는 간단한 방법만으로 테스트의 전 과정이 자동으로 진행된다.</p><p>이렇게 테스트 자체가 사람의 수작업을 거치는 방법을 사용하기보다는 코드로 만들어져서 자동으로 수행될 수 있어야 한다는 것은 매우 중요하다.</p><p><br /></p><p>자동으로 수행되는 테스트의 장점은 자주 반복할 수 있다는 것이다. 번거로운 작업이 없고 테스트를 빠르게 실행할 수 있기 때문에 언제든 코드를 수정하고 나서 테스트를 해 볼 수 있다.</p><p><br /></p><h4 id="지속적인-개선과-점진적인-개발을-위한-테스트">지속적인 개선과 점진적인 개발을 위한 테스트 <a href="#지속적인-개선과-점진적인-개발을-위한-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>처음 만든 초난간 DAO 코드를, 스프링을 이용한 깔끔하고 완성도 높은 객체지향적 코드로 발전시키는 과정의 일등 공신은 테스트였다.</p><p>만약 처음부터 스프링을 적용하고 XML로 설정을 만들고 모든 코드를 다 만들고 난 뒤에 이를 검증하려고 했다면, 쏟아지는 에러 메시지에 고민스러운 시간을 보내야 했을 것이다. 하지만 일단은 단순 무식한 방법으로 정상동작하는 코드를 만들고, 테스트를 만들어 뒀기 때문에 매우 작은 단계를 거쳐가면서 계속 코드를 개선해나갈 수 있었다.</p><p>또 UserDao의 기능을 추가하려고 할 때도 미리 만들어둔 테스트 코드는 유용하게 쓰일 수 있다. 기존에 만들어뒀던 기능들이 여전히 잘 동작하는지를 확인할 수 있다.</p><p><br /></p><h3 id="213-userdaotest의-문제점">2.1.3 UserDaoTest의 문제점 <a href="#213-userdaotest의-문제점" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>UserDaoTest가 UI까지 동원되는 번거로운 수동 테스트에 비해 장점이 많은 건 사실이다. 하지만 만족스럽지 못한 부분도 있다.</p><ul><li>UserDaoTest는 테스트를 수행하는 과정과 입력 데이터의 준비를 모두 자동으로 진행하도록 만들어졌다. 하지만 여전히 사람의 눈으로 확인하는 과정이 필요하다.<ul><li>입력한 값과 가져온 값이 일치하는지를 테스트 코드는 확인해주지 않는다. 단지 콘솔에 값만 출력해줄 뿐이다.<li>결국 그 콘솔에 나온 값을 보고 등록과 조회가 성공적으로 되고 있는지를 확인하는 건 사람의 책임이다.</ul><li>아무리 간단히 실행 가능한 main() 메서드라고 하더라도 매번 그것을 실행하는 것은 번거롭다.<ul><li>만약 DAO가 수백 개가 되고 그에 대한 main() 메서드도 그만큼 만들어진다면, 전체 기능을 테스트해보기 위해 main() 메서드를 수백 번 실행하는 수고가 필요하다.</ul></ul><p><br /></p><h2 id="22-userdaotest-개선">2.2 UserDaoTest 개선 <a href="#22-userdaotest-개선" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="221-테스트-검증의-자동화">2.2.1 테스트 검증의 자동화 <a href="#221-테스트-검증의-자동화" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>UserDaoTest를 통해 확인하고 싶은 사항은, add()에 전달환 User 오브젝트에 담긴 사용자 정보와 get()을 통해 다시 DB에서 가져온 User 오브젝트의 정보가 서로 정확히 일치하는가이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">// 수정 전 테스트 코드</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 조회 성공"</span><span class="o">);</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// 수정 후 테스트 코드</span>
<span class="k">if</span> <span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"테스트 실패 (name)"</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">else</span> <span class="nf">if</span> <span class="o">(!</span><span class="nc">User</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"테스트 실패 (password)"</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">else</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"조회 테스트 성공"</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>처음에 add()에 전달한 User 오브젝트와 get()을 통해 가져오는 User 오브젝트의 값을 비교해서 일치하는지 확인하는 것이다. 만약 다른 값이 있다면 그때는 테스트가 실패했다고 출력하고 테스트를 마치면 된다.</p><p>이 테스트는 UserDao의 두 가지 기능이 정상적으로 동작하는지를 언제든지 손쉽게 확인할 수 있게 해준다. 따라서 이 코드의 동작에 영향을 미칠 수 있는 어떤 변화라도 생기면 언제든 다시 실행해볼 수 있다.</p><p><br /></p><h3 id="222-테스트의-효율적인-수행과-결과-관리">2.2.2 테스트의 효율적인 수행과 결과 관리 <a href="#222-테스트의-효율적인-수행과-결과-관리" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>좀 더 필리하게 테스트를 수행하고 편리하게 결과를 확인하려면 단순한 main() 메서드로는 한계가 있다. 일정한 패턴을 가진 테스트를 만들 수 있고, 많은 테스트를 간단히 실행시킬 수 있으며, 테스트 결과를 종합해서 볼 수 있고, 테스트가 실패한 곳을 빠르게 찾을 수 있는 기능을 갖춘 테스트 지원 도구와 그에 맞는 테스트 작성 방법이 필요하다.</p><h4 id="junit-테스트로-전환">JUnit 테스트로 전환 <a href="#junit-테스트로-전환" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>JUnit은 프레임워크다. 개발자가 만든 클래스에 대한 제어 권한을 넘겨받아서 주도적으로 애플리케이션의 흐름을 제어한다. 따라서 main() 메서드도 필요 없고 오브젝트를 만들어서 실행시키는 코드를 만들 필요도 없다.</p><ul><li>테스트 메서드 전환<ul><li>main() 메서드에 있던 테스트 코드를 일반 메서드로 옮긴다.<ul><li>메서드가 public으로 선언돼야 한다.<li>메서드에 @Test라는 애노테이션을 붙여줘야 한다.</ul></ul><li>검증 코드 전환<ul><li>테스트의 결과를 검증하는 if/else 문장을 JUnit이 제공하는 assertThat이라는 스태틱 메서드를 이용해 변경한다.<ul><li>assertThat() 메서드는 첫 번째 파라미터의 값을 뒤에 나오는 매쳐라고 불리는 조건으로 비교해서 일치하면 다음으로 넘어가고, 아니면 테스트가 실패하도록 만들어준다.</ul></ul></ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">hamcrest</span><span class="o">.</span><span class="na">CoreWatchers</span><span class="o">.</span><span class="na">is</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">asserThat</span><span class="o">;</span>

<span class="o">...</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoTest</span> <span class="o">{</span>
  <span class="c1">// 테스트 메서드 전환</span>
  <span class="nd">@Test</span> 
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addAndGet</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
    <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericXmlApplicationContext</span><span class="o">(</span><span class="s">"applicationContext.xml"</span><span class="o">);</span>
    
    <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"gyumee"</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"박성철"</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"springno1"</span><span class="o">);</span>
    
    <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    
    <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    
    <span class="c1">// 검증 코드 전환</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="junit-테스트-실행">JUnit 테스트 실행 <a href="#junit-테스트-실행" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><blockquote><p>추가할 라이브러리 : com.springsource.org.junit-4.7.0.jar</p></blockquote><p>스프링 컨테이너와 마찬가지로 JUnit 프레임워크도 자바 코드로 만들어진 프로그램이므로 어디선가 한 번은 JUnit 프레임워크를 시작시켜 줘야 한다. 어디에든 main() 메서드를 하나 추가하고, 그 안에 JUnitCore 클래스의 main 메서드를 호출해주는 간단한 코드를 넣어주면 된다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">org.junit.runner.JUnitCore</span><span class="o">;</span>
<span class="o">...</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">JUnitCore</span><span class="o">.</span><span class="na">main</span><span class="o">(</span><span class="s">"springbook.user.dao.UserDaoTest"</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>JUnit은 assertThat()을 이용해 검증했을 때 기대한 결과가 아니면 AssertionError를 던진다. 따라서 assertThat()의 조건을 만족하지 못하면 테스트는 더 이상 진행되지 않고 JUnit은 테스트가 실패했음을 알게된다. 테스트 수행 중에 일반 예외가 발생한 경우도 마찬가지다.</p><p><br /></p><h2 id="23-개발자를-위한-테스팅-프레임워크-junit">2.3 개발자를 위한 테스팅 프레임워크 JUnit <a href="#23-개발자를-위한-테스팅-프레임워크-junit" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="231-junit-테스트-실행-방법">2.3.1 JUnit 테스트 실행 방법 <a href="#231-junit-테스트-실행-방법" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>JUnitCore를 이요해 테스트를 실행하고 콘솔에 출력된 메시지를 보고 결과를 확인하는 방법은 가장 간단하긴 하지만 테스트의 수가 많아지면 관리하기가 힘들어진다.</p><p>가장 좋은 JUnit 테스트 실행 방법은 자바 IDE에 내장된 JUnit 테스트 지원 도구를 사용하는 것이다.</p><ul><li>IDE<ul><li>JUnit 테스트 실행과 그 결과를 확인하는 방법이 매우 간단하고 직관적이며 소스와 긴밀하게 연동돼서 결과를 볼 수 있기 때문에, 개발 중에 테스트를 실행하고자 할 때는 IDE의 지원을 받는 것이 가장 편리하다.</ul><li>빌드 툴<ul><li>여러 개발자가 만든 코드를 모두 통합해서 테스트를 수행해야 할 때도 있다. 이런 경우에는 서버에서 모든 코드를 가져와 통합하고 빌드한 뒤에 테스트를 수행하는 것이 좋다. 이때는 빌드 스크립트를 이용해 JUnit 테스트를 실행하고 그 결과를 메일 등으로 통보받는 방법을 사용하면 된다.</ul></ul><p><br /></p><h3 id="232-테스트-결과의-일관성">2.3.2 테스트 결과의 일관성 <a href="#232-테스트-결과의-일관성" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>UserDaoTest의 문제는 이전 테스트 때문에 DB에 등록된 중복 데이터가 있을 수 있다는 점이다.</p><p>가장 좋은 해결책은 addAndGet() 테스트를 마치고 나면 테스트가 등록한 사용자 정보를 삭제해서, 테스트를 수행하기 이전 상태로 만들어주는 것이다. 그러면 테스트를 아무리 여러 번 반복해서 실행하더라도 항상 동일한 결과를 얻을 수 있다.</p><h4 id="deleteall와-getcount-추가">deleteAll()와 getCount() 추가 <a href="#deleteall와-getcount-추가" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li>deleteAll<ul><li>User 테이블의 모든 레코드를 삭제한다.</ul><li>getCount<ul><li>User 테이블의 레코드 개수를 조회한다.</ul></ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteAll</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
  
  <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"delete from users"</span><span class="o">);</span>
  <span class="n">ps</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
  
  <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="n">c</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
  
  <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select count(*) from users"</span><span class="o">);</span>
  
  <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
  <span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
  <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">();</span>
  
  <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="n">c</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  
  <span class="k">return</span> <span class="n">count</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="deleteall과-getcount-테스트">deleteAll()과 getCount() 테스트 <a href="#deleteall과-getcount-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="nd">@Test</span> 
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addAndGet</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericXmlApplicationContext</span><span class="o">(</span><span class="s">"applicationContext.xml"</span><span class="o">);</span>

  <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  
  <span class="c1">// 추가</span>
  <span class="n">dao</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
  
  <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
  <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"gyumee"</span><span class="o">);</span>
  <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"박성철"</span><span class="o">);</span>
  <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"springno1"</span><span class="o">);</span>

  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
  <span class="c1">// 추가</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>

  <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>

  <span class="n">assertThat</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()));</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="동일한-결과를-보장하는-테스트">동일한 결과를 보장하는 테스트 <a href="#동일한-결과를-보장하는-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>단위 테스트는 코드가 바뀌지 않는다면 매번 실행할 때마다 동일한 테스트 결과를 얻을 수 있어야 한다.</p><p>DB에 남아 있는 데이터와 같은 외부 환경에 영향을 받지 말아햐 하는 것은 물론이고, 테스트를 실행하는 순서를 바꿔도 동일한 결과가 보장되도록 만들어야 한다.</p><p><br /></p><h3 id="233-포괄적인-테스트">2.3.3 포괄적인 테스트 <a href="#233-포괄적인-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>두 개 이상의 레코드를 add() 햇을 때는 getCount()의 실행 결과가 어떻게 될까? 0과 1 두 가지를 해봤으니 나머지도 당연히 잘될 것이라고 추정할 수도 있겠지만 미처 생각하지 못한 문제가 숨어 있을지도 모르니 더 꼼꼼한 테스트를 해보는 것이 좋은 자세다.</p><h4 id="getcount-테스트">getCount() 테스트 <a href="#getcount-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>여러 개의 User를 등록해가면서 getCount()의 결과를 매번 확인해보겠다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">count</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericXmlApplicationContext</span><span class="o">(</span><span class="s">"applicationContext.xml"</span><span class="o">);</span>
  
  <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="nc">User</span> <span class="n">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"gyumee"</span><span class="o">,</span> <span class="s">"박성철"</span><span class="o">,</span> <span class="s">"springno1"</span><span class="o">);</span>
  <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"leegw700"</span><span class="o">,</span> <span class="s">"이길원"</span><span class="o">,</span> <span class="s">"springno2"</span><span class="o">);</span>
  <span class="nc">User</span> <span class="n">user3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"bumjin"</span><span class="o">,</span> <span class="s">"박범진"</span><span class="o">,</span> <span class="s">"springno3"</span><span class="o">);</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user1</span><span class="o">);</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user3</span><span class="o">);</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="addandget-테스트-보완">addAndGet() 테스트 보완 <a href="#addandget-테스트-보완" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>이미 충분히 검증된 것 같다. 하지만 id를 조건으로 해서 사용자를 검색하는 기능을 가진 get()에 대한 테스트는 조금 부족한 감이 있다. get() 파라미터로 주어진 id에 해당하는 사용자를 가져온 것인지, 그냥 아무거나 가져온 것인지 테스트에서 검증하지는 못했다.</p><p>User를 하나 더 추가해서 두 개의 User를 add() 하고, 각 User의 id를 파라미터로 전달해서 get()을 실행하도록 만들어보자.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addAndGet</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="o">...</span>
    
  <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="nc">User</span> <span class="n">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"gyumee"</span><span class="o">,</span> <span class="s">"박성철"</span><span class="o">,</span> <span class="s">"springno1"</span><span class="o">);</span>
  <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"leegw700"</span><span class="o">,</span> <span class="s">"이길원"</span><span class="o">,</span> <span class="s">"springno2"</span><span class="o">);</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user1</span><span class="o">);</span>
  <span class="n">dao</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
  
  <span class="nc">User</span> <span class="n">userget1</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">user1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">userget1</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user1</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">userget1</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user1</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()));</span>
  
  <span class="nc">User</span> <span class="n">userget2</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">userget2</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">userget2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">user2</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()));</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="get-예외조건에-대한-테스트">get() 예외조건에 대한 테스트 <a href="#get-예외조건에-대한-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>get() 메서드에 전달된 id 값에 해당하는 사용자 정보가 없다면 어떻게 될까? 이럴땐 두 가지 방법이 있을 것이다.</p><ul><li>null과 같은 특별한 값을 리턴<li>id에 해당하는 정보를 찾을 수 없다고 예외를 던짐</ul><p>각기 장단점이 있는데 여기서는 후자의 방법을 써보자.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span><span class="o">=</span><span class="nc">EmptyResultDataAccessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">// 발생할 것으로 기대되는 예외 클래스 지정</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">getUserFailure</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericXmlApplicationContext</span><span class="o">(</span><span class="s">"applicationContext.xml"</span><span class="o">);</span>
  
  <span class="nc">UserDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"userDao"</span><span class="o">,</span> <span class="nc">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">dao</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
  <span class="n">assertThat</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getCount</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
  
  <span class="n">dao</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"unknown_id"</span><span class="o">);</span> <span class="c1">// 예외 발생(예외가 발생하지 않으면 테스트 실패)</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="테스트를-성공시키기-위한-코드의-수정">테스트를 성공시키기 위한 코드의 수정 <a href="#테스트를-성공시키기-위한-코드의-수정" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>위의 테스트가 성공하도록 get() 메서드 코드를 수정해야 한다. 주어진 id에 해당하는 데이터가 없으면 지정했던 예외를 던진다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">User</span> <span class="nf">get</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
  
  <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"id"</span><span class="o">));</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"password"</span><span class="o">));</span>
  <span class="o">}</span>
  
  <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="n">c</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  
  <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">EmptyResultDataAccessException</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  
  <span class="k">return</span> <span class="n">user</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h4 id="포괄적인-테스트">포괄적인 테스트 <a href="#포괄적인-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>개발자가 테스트를 직접 만들 때 자주 하는 실수가 하나 있다. 바로 성공하는 테스트만 골라서 만드는 것이다. 개발자는 머릿속으로 이 코드가 잘 돌아가는 케이스를 상상하면서 코드를 만드는 경우가 일반적이다. 그래서 테스트를 작성할 때도 문제가 될 만한 상황이나, 입력 값 등은 교모히도 잘 피해서 코드를 만드는 습성이 있다.</p><p>그래서 테스트를 작성할 때 <strong>부정적인 케이스를 먼저 만드는 습관을 들이는 게 좋다.</strong> get() 메서드의 경우라면, 존재하지 않는 id가 주어졌을 때는 어떻게 반응할지를 먼저 결정하고, 이를 확인할 수 있는 테스트를 먼저 만들려고 한다면 예외적인 상황을 빠뜨리지 않는 꼼꼼한 개발이 가능하다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/book/'>Book</a>, <a href='/categories/%ED%86%A0%EB%B9%84%EC%9D%98-%EC%8A%A4%ED%94%84%EB%A7%81/'>토비의 스프링</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/spring/" class="post-tag no-text-decoration" >Spring</a> <a href="/tags/junit/" class="post-tag no-text-decoration" >JUnit</a> <a href="/tags/%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/" class="post-tag no-text-decoration" >단위 테스트</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-1 pt-1 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=2장. 테스트 - H&#39;s Tech Blog&amp;url=https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=2장. 테스트 - H&#39;s Tech Blog&amp;u=https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://github.com/heung27/posts/2%EC%9E%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8/&amp;text=2장. 테스트 - H&#39;s Tech Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/item-21-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%8A%94-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EC%AA%BD%EC%9D%84-%EC%83%9D%EA%B0%81%ED%95%B4-%EC%84%A4%EA%B3%84%ED%95%98%EB%9D%BC/">Item 21. 인터페이스는 구현하는 쪽을 생각해 설계하라</a><li><a href="/posts/item-20-%EC%B6%94%EC%83%81-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%B3%B4%EB%8B%A4%EB%8A%94-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EC%9A%B0%EC%84%A0%ED%95%98%EB%9D%BC/">Item 20. 추상 클래스보다는 인터페이스를 우선하라</a><li><a href="/posts/item-19-%EC%83%81%EC%86%8D%EC%9D%84-%EA%B3%A0%EB%A0%A4%ED%95%B4-%EC%84%A4%EA%B3%84%ED%95%98%EA%B3%A0-%EB%AC%B8%EC%84%9C%ED%99%94%ED%95%98%EB%9D%BC-%EA%B7%B8%EB%9F%AC%EC%A7%80-%EC%95%8A%EC%95%98%EB%8B%A4%EB%A9%B4-%EC%83%81%EC%86%8D%EC%9D%84-%EA%B8%88%EC%A7%80%ED%95%98%EB%9D%BC/">Item 19. 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라</a><li><a href="/posts/item-18-%EC%83%81%EC%86%8D%EB%B3%B4%EB%8B%A4%EB%8A%94-%EC%BB%B4%ED%8F%AC%EC%A7%80%EC%85%98%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC/">Item 18. 상속보다는 컴포지션을 사용하라</a><li><a href="/posts/item-17-%EB%B3%80%EA%B2%BD-%EA%B0%80%EB%8A%A5%EC%84%B1%EC%9D%84-%EC%B5%9C%EC%86%8C%ED%99%94%ED%95%98%EB%9D%BC/">Item 17. 변경 가능성을 최소화하라</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/java-8/">Java 8</a> <a class="post-tag" href="/tags/override/">Override</a> <a class="post-tag" href="/tags/lambda/">Lambda</a> <a class="post-tag" href="/tags/method-reference/">Method Reference</a> <a class="post-tag" href="/tags/constructor/">Constructor</a> <a class="post-tag" href="/tags/functional-interface/">Functional Interface</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/interface/">Interface</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Thymeleaf/"><div class="card-body"> <em class="timeago small" data-ts="1644471660" > 2022-02-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Thymeleaf</h3><div class="text-muted small"><p> 타임리프는 템플릿 엔진의 한 종류이다. 타임리프에 대해 알아보기 전에 템플릿 엔진에 대한 개념을 잡고 가겠다. 템플릿 엔진(Template Engine)이란? 템플릿 엔진이란 템플릿 양식과 특정 데이터 모델에 따른 입력 자료를 합성하여 결과 문서를 출력하는 소프트웨어(또는 소프트웨어 컴포넌트)를 말한다. 다시 말해 HTML과 데이터를 합성하여 ...</p></div></div></a></div><div class="card"> <a href="/posts/Bean-Validation/"><div class="card-body"> <em class="timeago small" data-ts="1645106940" > 2022-02-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bean Validation</h3><div class="text-muted small"><p> 개발에서 가장 중요한 요소 중 하나가 Validation이다. 사용자로부터 어떤 값이 입력될지 모르기 때문에 검증하는 과정이 필수적이다. 검증 로직은 클라이언트와 서버에서 수행하게 된다. 클라이언트에서만 검증하게 되면 postman과 같은 툴을 이용해 데이터를 조작할 수 있어 보안에 취약하며, 서버에서만 검증하게 되면 즉각적인 반응이 어려워 고객 사...</p></div></div></a></div><div class="card"> <a href="/posts/webflux-%EA%B0%9C%EB%85%90/"><div class="card-body"> <em class="timeago small" data-ts="1654182480" > 2022-06-03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>WebFlux - 개념</h3><div class="text-muted small"><p> 최근 회사에서 웹플럭스(WebFlux)에 대한 이야기를 들었다. 처음 들어본 단어였지만 이미 핫한 기술이었고, 이전에 항상 사용했던 Spring MVC와는 또다른 구조였기에 상당히 흥미로웠다. 그리고 예전에 진행했던 프로젝트에서 비동기 처리를 위해 Future를 사용했는데 웹플럭스 방식으로 처리했다면 더 좋지 않았을까 하는 생각도 들었다. 이번 포스...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/item-18-%EC%83%81%EC%86%8D%EB%B3%B4%EB%8B%A4%EB%8A%94-%EC%BB%B4%ED%8F%AC%EC%A7%80%EC%85%98%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC/" class="btn btn-outline-primary" prompt="Older"><p>Item 18. 상속보다는 컴포지션을 사용하라</p></a> <a href="/posts/item-19-%EC%83%81%EC%86%8D%EC%9D%84-%EA%B3%A0%EB%A0%A4%ED%95%B4-%EC%84%A4%EA%B3%84%ED%95%98%EA%B3%A0-%EB%AC%B8%EC%84%9C%ED%99%94%ED%95%98%EB%9D%BC-%EA%B7%B8%EB%9F%AC%EC%A7%80-%EC%95%8A%EC%95%98%EB%8B%A4%EB%A9%B4-%EC%83%81%EC%86%8D%EC%9D%84-%EA%B8%88%EC%A7%80%ED%95%98%EB%9D%BC/" class="btn btn-outline-primary" prompt="Newer"><p>Item 19. 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/heung27">Jin Heung An</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/java-8/">Java 8</a> <a class="post-tag" href="/tags/override/">Override</a> <a class="post-tag" href="/tags/lambda/">Lambda</a> <a class="post-tag" href="/tags/method-reference/">Method Reference</a> <a class="post-tag" href="/tags/constructor/">Constructor</a> <a class="post-tag" href="/tags/functional-interface/">Functional Interface</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/interface/">Interface</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-J2QJ5KLVPE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-J2QJ5KLVPE'); }); </script>
